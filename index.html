<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Distorted Reality - Music Portfolio</title>
    <link rel="stylesheet" href="styles.css">
    
    <!-- VFX-JS for distortion effects -->
    <script type="module" src="https://esm.sh/@vfx-js/core@0.8.0"></script>
    
    <!-- GSAP for portfolio animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrambleTextPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>
<body>
    <!-- DISTORTED REALITY SECTION -->
    <div class="distorted-section">
        <section class="reality-section">
            <h1 class="reality-title">The reality,</h1>
            <img class="reality-img" src="https://rene-huber.eu/links/web_huber.webp" alt="Reality"/>
            <p class="reality-text">  
                Obviously, this is just a test text — but how do you know?
                There is certainly a writer of this text, someone who exists.
                Even if it was automatically generated by some tool or AI,
                there must have been a text, somewhere, used as training material.
                So we cannot escape the spirit — the vibe — the shadow it casts.
                It comes from the soul, buried deep in unconscious limbo.
            </p>
        </section>

        <section class="reality-section">
            <div class="right">
                <h1 class="reality-title">...is always,</h1>    
            </div> 
            <div class="col">
                <img class="reality-img" src="https://rene-huber.eu/links/web_huber.webp" alt="Always"/>
                <p class="reality-text">  
                    Somewhere between the folds, something breathes.
                    Not a presence, but the memory of having been watched.
                    Syntax curls back on itself, a serpent swallowing not its tail, but its own shadow.
                    Read again. You missed it the first time. You always do.        
                </p>    
            </div>
            
            <div class="col">
                <p class="reality-text">
                    And if the soul remains, so too does its intent — not always clear, not always benevolent.
                    What was the writer thinking? Or worse — what was it trying not to think?
                    Language is a veil, but veils are thin when backlit by desire, or fear, or guilt.
                    Read carefully. Something watches back when you stare too long into a sentence.      
                </p>      
                <img class="reality-img" src="https://picsum.photos/id/102/800/600" alt="Distorted"/>   
            </div>  
        </section>

        <section class="reality-section last">
            <img class="reality-img" src="https://picsum.photos/id/972/800/600" alt="Final"/>  
            <h2 class="reality-subtitle">...distorted.</h2>
        </section>

        <!-- Transition element -->
        <div class="transition-element">
            <div class="scroll-indicator">
                <span>Scroll to enter the void</span>
                <div class="scroll-arrow">↓</div>
            </div>
        </div>
    </div>

    <!-- MUSIC PORTFOLIO SECTION -->
    <div class="portfolio-section">
        <main class="portfolio-container">
            <h1 class="sr-only">Music Portfolio</h1>
            <ul class="project-list" role="list">
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-001.jpg">
                    <span class="project-data artist hover-text">DEATH ON THE BALCONY</span>
                    <span class="project-data album hover-text">VICE</span>
                    <span class="project-data category hover-text">SINGLE</span>
                    <span class="project-data label hover-text">SELF RELEASED</span>
                    <span class="project-data year hover-text">2023</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-002.jpg">
                    <span class="project-data artist hover-text">JIMMY WHOO</span>
                    <span class="project-data album hover-text">NIGHTFALL</span>
                    <span class="project-data category hover-text">EP</span>
                    <span class="project-data label hover-text">DEEP HOUSE</span>
                    <span class="project-data year hover-text">2022</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-003.jpg">
                    <span class="project-data artist hover-text">HERMANOS GUTIÉRREZ</span>
                    <span class="project-data album hover-text">EL BUENO Y EL MALO</span>
                    <span class="project-data category hover-text">ALBUM</span>
                    <span class="project-data label hover-text">EASY EYE SOUND</span>
                    <span class="project-data year hover-text">2022</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-004.jpg">
                    <span class="project-data artist hover-text">NEIL FRANCES</span>
                    <span class="project-data album hover-text">LINES</span>
                    <span class="project-data category hover-text">ALBUM</span>
                    <span class="project-data label hover-text">ISKA DHAMD</span>
                    <span class="project-data year hover-text">2021</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-005.jpg">
                    <span class="project-data artist hover-text">ADDEX</span>
                    <span class="project-data album hover-text">MIDNIGHT SESSIONS</span>
                    <span class="project-data category hover-text">EP</span>
                    <span class="project-data label hover-text">ELECTRONIC</span>
                    <span class="project-data year hover-text">2023</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-006.jpg">
                    <span class="project-data artist hover-text">BEYHUDE</span>
                    <span class="project-data album hover-text">YALNIZLIK</span>
                    <span class="project-data category hover-text">SINGLE</span>
                    <span class="project-data label hover-text">ALBÜM YAPIM</span>
                    <span class="project-data year hover-text">2023</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-007.jpg">
                    <span class="project-data artist hover-text">THING</span>
                    <span class="project-data album hover-text">SHAPES</span>
                    <span class="project-data category hover-text">ALBUM</span>
                    <span class="project-data label hover-text">KOMPAKT</span>
                    <span class="project-data year hover-text">2021</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-008.jpg">
                    <span class="project-data artist hover-text">ABAKUS</span>
                    <span class="project-data album hover-text">THAT MUCH CLOSER TO THE SUN</span>
                    <span class="project-data category hover-text">ALBUM</span>
                    <span class="project-data label hover-text">BEATSERVICE</span>
                    <span class="project-data year hover-text">2020</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-001.jpg">
                    <span class="project-data artist hover-text">SAINTÉ</span>
                    <span class="project-data album hover-text">ANXIETY</span>
                    <span class="project-data category hover-text">SINGLE</span>
                    <span class="project-data label hover-text">PARLOPHONE</span>
                    <span class="project-data year hover-text">2023</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-002.jpg">
                    <span class="project-data artist hover-text">CANNONS</span>
                    <span class="project-data album hover-text">FEVER DREAM</span>
                    <span class="project-data category hover-text">ALBUM</span>
                    <span class="project-data label hover-text">COLUMBIA</span>
                    <span class="project-data year hover-text">2022</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-003.jpg">
                    <span class="project-data artist hover-text">BAWO</span>
                    <span class="project-data album hover-text">REAL LIES</span>
                    <span class="project-data category hover-text">EP</span>
                    <span class="project-data label hover-text">NINJA TUNE</span>
                    <span class="project-data year hover-text">2023</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-004.jpg">
                    <span class="project-data artist hover-text">SUMAC DUB</span>
                    <span class="project-data album hover-text">ECHOES FROM THE VOID</span>
                    <span class="project-data category hover-text">ALBUM</span>
                    <span class="project-data label hover-text">DUB RECORDS</span>
                    <span class="project-data year hover-text">2022</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-005.jpg">
                    <span class="project-data artist hover-text">LEISURE</span>
                    <span class="project-data album hover-text">THE BIG DOOR</span>
                    <span class="project-data category hover-text">ALBUM</span>
                    <span class="project-data label hover-text">CASCINE</span>
                    <span class="project-data year hover-text">2021</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-006.jpg">
                    <span class="project-data artist hover-text">MINDCHATTER</span>
                    <span class="project-data album hover-text">IMAGINARY FRIENDS</span>
                    <span class="project-data category hover-text">ALBUM</span>
                    <span class="project-data label hover-text">INDEPENDENT</span>
                    <span class="project-data year hover-text">2023</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-007.jpg">
                    <span class="project-data artist hover-text">DJ CINÉMA QUARTIER LATIN</span>
                    <span class="project-data album hover-text">NUIT BLANCHE</span>
                    <span class="project-data category hover-text">MIX</span>
                    <span class="project-data label hover-text">KITSUNE</span>
                    <span class="project-data year hover-text">2023</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-008.jpg">
                    <span class="project-data artist hover-text">EVREN FURTUNA</span>
                    <span class="project-data album hover-text">COSMIC FREQUENCIES</span>
                    <span class="project-data category hover-text">EP</span>
                    <span class="project-data label hover-text">DEEP TECH</span>
                    <span class="project-data year hover-text">2022</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-001.jpg">
                    <span class="project-data artist hover-text">PABLO BOLIVAR</span>
                    <span class="project-data album hover-text">MEMORIES</span>
                    <span class="project-data category hover-text">ALBUM</span>
                    <span class="project-data label hover-text">SEVEN VILLAS</span>
                    <span class="project-data year hover-text">2021</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-002.jpg">
                    <span class="project-data artist hover-text">DIALE</span>
                    <span class="project-data album hover-text">FRAGMENTS</span>
                    <span class="project-data category hover-text">EP</span>
                    <span class="project-data label hover-text">AFTERLIFE</span>
                    <span class="project-data year hover-text">2023</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-003.jpg">
                    <span class="project-data artist hover-text">MARTIN ROTH</span>
                    <span class="project-data album hover-text">REBIRTH</span>
                    <span class="project-data category hover-text">ALBUM</span>
                    <span class="project-data label hover-text">IBOGA</span>
                    <span class="project-data year hover-text">2022</span>
                </li>
                <li class="project-item" data-image="https://assets.codepen.io/7558/portrait-fashion-004.jpg">
                    <span class="project-data artist hover-text">KLARTRAUM</span>
                    <span class="project-data album hover-text">LUCID</span>
                    <span class="project-data category hover-text">ALBUM</span>
                    <span class="project-data label hover-text">LUCIDFLOW</span>
                    <span class="project-data year hover-text">2023</span>
                </li>
            </ul>
        </main>

        <div class="background-image" id="backgroundImage" role="img" aria-hidden="true"></div>

        <aside class="corner-elements">
            <div class="corner-item top-left">
                <div class="corner-square" aria-hidden="true"></div>
            </div>
            <nav class="corner-item top-right">
                <a href="https://open.spotify.com/user/226ilulo57zutgtiwjsjqnqsy?si=0004e7bc669a406e">Spotify</a> |
                <a href="mailto:hi@filip.fyi">Email</a> |
                <a href="https://x.com/filipz" target="_blank" rel="noopener">X</a>
            </nav>
            <div class="corner-item bottom-left">43.9250° N, 19.5530° E</div>
            <time class="corner-item bottom-right" id="current-time"></time>
        </aside>
    </div>
 <script type="module">
        // Made with VFX-JS
        // https://amagi.dev/vfx-js/
        import { VFX } from "https://esm.sh/@vfx-js/core@0.8.0";

        const shader = `
        precision highp float;
        uniform sampler2D src;
        uniform vec2 offset;
        uniform vec2 resolution;
        uniform float time;
        out vec4 outColor;

        vec4 readTex(vec2 uv) {  
          vec4 c = texture(src, uv);  
          c.a *= smoothstep(.5, .499, abs(uv.x - .5)) * smoothstep(.5, .499, abs(uv.y - .5));  // smooth edge
          return c;
        }

        vec2 zoom(vec2 uv, float t) {
          return (uv - .5) * t + .5;
        }

        float wave(float y) {
          return sin(y * 1190. + time * 3.) * sin(y * 1001. + time * 7.) * sin(y * 1479. + time * .5) * 0.001;
        }

        float rand(vec3 p) {
          return fract(sin(dot(p, vec3(829., 4839., 432.))) * 39428.);
        }

        void main() {
          vec2 uv = (gl_FragCoord.xy - offset) / resolution;       
          
          vec2 p = uv * 2. - 1.;
          p.x *= resolution.x / resolution.y;
          float l = length(p); 
           
          // distort
          float dist = pow(l, 2.) * .3;
          dist = smoothstep(0., 1., dist);
          uv = zoom(uv, 0.5 + dist);  
            
          // blur
          vec2 du = (uv - .5);
          float a = atan(p.y, p.x);
          float rd = rand(vec3(a, time, 0));
          uv = (uv - .5) * (1.0 + rd * pow(l * 0.7, 3.) * 0.3) + .5;
            
          vec2 uvr = uv;
          vec2 uvg = uv;
          vec2 uvb = uv;
            
          // aberration
          float d = (1. + sin(uv.y * 20. + time * 3.) * 0.1) * 0.05;
          uvr.x += 0.0015;
          uvb.x -= 0.0015;
          uvr = zoom(uvr, 1. + d * l * l);
          uvb = zoom(uvb, 1. - d * l * l);    
            
          vec4 cr = readTex(uvr);
          vec4 cg = readTex(uvg);
          vec4 cb = readTex(uvb);  
          
          outColor = vec4(cr.r, cg.g, cb.b, (cr.a + cg.a + cb.a) / 1.);
          
          vec4 deco;
          // scanline
          float res = resolution.y;
          deco += (
            sin(uv.y * res * .7 + time * 100.) *
            sin(uv.y * res * .3 - time * 130.)
          ) * 0.05;
          // grid
          deco += smoothstep(.01, .0, min(fract(uv.x * 20.), fract(uv.y * 20.))) * 0.1;
          outColor += deco * smoothstep(2., 0., l);
          
          // vignette
          outColor *= 1.8 - l * l;  
          // dither
          outColor += rand(vec3(p, time)) * 0.1;     
        }
        `;

        const shader2 = `
        precision highp float;
        uniform sampler2D src;
        uniform vec2 offset;
        uniform vec2 resolution;
        uniform float time;
        uniform float id;
        out vec4 outColor;

        vec4 readTex(vec2 uv) {  
          vec4 c = texture(src, uv);  
          c.a *= smoothstep(.5, .499, abs(uv.x - .5)) * smoothstep(.5, .499, abs(uv.y - .5));  // smooth edge
          return c;
        }

        float rand(vec2 p) {
          return fract(sin(dot(p, vec2(829., 483.))) * 394.);
        }

        float rand(vec3 p) {
          return fract(sin(dot(p, vec3(829., 4839., 432.))) * 39428.);
        }

        vec2 dist(vec2 uv, float f) {
          float t = time + id;
          uv += sin(uv.y * 12. + t * 1.7) * sin(uv.y * 17. + t * 2.3) * f;
          return uv;
        }

        void main() {
          vec2 uv = (gl_FragCoord.xy - offset) / resolution;
          vec2 uvr = uv, uvg = uv, uvb = uv;
          float r = rand(vec2(floor(time * 43.), id));
          
          if (r > 0.8) {
            float y = sin(floor(uv.y / 0.07)) + sin(floor(uv.y / 0.003 + time));
            float f = rand(vec2(y, floor(time * 5.0) + id)) * 2. - 1.;
            uvr.x += f * 0.1;
            uvg.x += f * 0.2;
            uvb.x += f * 0.3;
          }
          
          float r2 = rand(vec2(floor(time * 37.), id + 10.));
          if (r2 > 0.9) {
            uvr.x += sin(uv.y * 7. + time + id + 1.) * 0.03;
            uvg.x += sin(uv.y * 5. + time + id + 2.) * 0.03;
            uvb.x += sin(uv.y * 3. + time + id + 3.) * 0.03;
          }
          
          vec4 cr = readTex(uvr);
          vec4 cg = readTex(uvg);
          vec4 cb = readTex(uvb);  
          
          outColor = vec4(cr.r, cg.g, cb.b, (cr.a + cg.a + cb.a) / 1.);
        }
        `;

        const vfx = new VFX({ 
            scrollPadding: false,
            postEffect: { shader } 
        });

        window.addEventListener('load', async function() {
            let i = 0;
            for (const e of document.querySelectorAll('img,h1,h2,p')) {
                await vfx.add(e, { 
                    shader: shader2,
                    uniforms: { id: i++ },
                    // overlay: true,
                });
            }  
        });
    </script>
    <script src="script_1.js"></script>
    <script src="script_2.js"></script>
</body>
</html>